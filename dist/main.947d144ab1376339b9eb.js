(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,r=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(r)?r:String(r)),i)}var r}var n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",activeButtonClass:"popup__button-valid",inactiveButtonClass:"popup__button-invalid",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_visible"},o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._buttonElement=n.querySelector(t.submitButtonSelector),this._inputList=Array.from(n.querySelectorAll(t.inputSelector))}var n,o;return n=e,(o=[{key:"_hideInputError",value:function(e,t,n){var o=this._formElement.querySelector(".".concat(t.name,"-error"));o.classList.remove(this._config.errorClass),o.textContent="",t.classList.remove(this._config.inputErrorClass)}},{key:"_showInputError",value:function(e,t,n){var o=this._formElement.querySelector(".".concat(t.name,"-error"));o.classList.add(this._config.errorClass),o.textContent=t.validationMessage,t.classList.add(this._config.errorClass)}},{key:"_checkInputValidity",value:function(e,t,n){t.validity.valid?this._hideInputError(e,t,n):this._showInputError(e,t,n)}},{key:"_toggleButtonState",value:function(e,t,n){this._hasInvalidInput(e)?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_hasInvalidInput",value:function(e){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(e,t){var n=this;this._toggleButtonState(this._inputList,this._buttonElement,t),this._inputList.forEach((function(o){o.addEventListener("input",(function(){n._checkInputValidity(e,o,t),n._toggleButtonState(n._inputList,n._buttonElement,t)}))}))}},{key:"enableValidation",value:function(e,t){this._setEventListeners(t,e),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"buttonDefaultState",value:function(e){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(e._formElement,t,e._validationConfig)}))}}])&&t(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===i(r)?r:String(r)),o)}var r}var u=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._alt="Изображение: ".concat(this._name),this._templateSelector=n,this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".element__button-like"),this._trashButton=this._element.querySelector(".element__button-trash"),this._elemImage=this._element.querySelector(".element__image"),this.elemTitle=this._element.querySelector(".element__title"),this._handleCardClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._setEventListeners(),this.elemTitle.textContent=this._name,this._elemImage.src=this._link,this._elemImage.alt=this._alt,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._trashButton.addEventListener("click",(function(){e._handleTrashButton()})),this._likeButton.addEventListener("click",(function(){e._handleLikeButton()})),this._elemImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_handleTrashButton",value:function(){this._element.remove()}},{key:"_handleLikeButton",value:function(){this._likeButton.classList.toggle("element__button-like_active")}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=document.querySelector(".profile__button-edit"),a=document.querySelector("#popupProfile"),s=document.querySelector(".profile__name"),c=document.querySelector(".profile__job"),p=document.querySelector(".popup__input_text_name"),m=document.querySelector(".popup__input_text_job"),d=document.querySelector("#popupFormProfileEdit"),_=document.querySelectorAll(".popup"),f=document.querySelector(".popup__input-card-name"),h=document.querySelector(".popup__input-card-url"),v=document.querySelector(".popup__form-card"),y=document.querySelector(".elements"),b=document.querySelector(".profile__button-add"),S=document.querySelector(".popup-card"),g=document.querySelector(".full-img"),k=document.querySelector(".full-img__name-image"),E=document.querySelector(".full-img__image");function L(e){e.classList.add("popup_opened"),document.addEventListener("keydown",C)}function q(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",C)}function C(e){"Escape"===e.key&&q(document.querySelector(".popup_opened"))}function w(e){return new u(e,"#elements",(function(e,t){k.textContent=e,E.src=t,E.alt=e,L(g)})).generateCard()}_.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&q(e),t.target.classList.contains("popup__button-close")&&q(e)}))})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){y.prepend(w(e))})),d.addEventListener("submit",(function(e){e.preventDefault(),s.textContent=p.value,c.textContent=m.value,q(a)})),v.addEventListener("submit",(function(e){e.preventDefault();var t={};t.name=f.value,t.link=h.value,y.prepend(w(t)),q(S)}));var B=new o(n,d);B.enableValidation();var j=new o(n,v);j.enableValidation(),l.addEventListener("click",(function(){L(a),B.resetValidation(),B.buttonDefaultState(),p.value=s.textContent,m.value=c.textContent})),b.addEventListener("click",(function(){L(S),j.resetValidation(),v.reset()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXNEeEMsSUFDQXNELEVBQVUxQyxpQkFBaUIsU0FBUyxXQUNuQytDLEVBQVVKLEdBQ1ZxQixFQUFxQkMsa0JBQ3JCekIsRUFBYzJCLE9BQ2YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9hcnJheUNhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBhY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tdmFsaWQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbi1pbnZhbGlkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xufTtcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIH1cbiAgX2hpZGVJbnB1dEVycm9yKF9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBfY29uZmlnKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihfZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgX2NvbmZpZykge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5uYW1lfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoX2Zvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIF9jb25maWcpIHtcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihfZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgX2NvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKF9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBfY29uZmlnKTtcbiAgICB9XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKF9pbnB1dExpc3QsIF9idXR0b25FbGVtZW50LCBfY29uZmlnKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChfaW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBfaGFzSW52YWxpZElucHV0KF9pbnB1dExpc3QpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKF9mb3JtRWxlbWVudCwgX2NvbmZpZykge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCwgX2NvbmZpZyk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoX2Zvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIF9jb25maWcpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQsIF9jb25maWcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbihfY29uZmlnLCBfZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhfZm9ybUVsZW1lbnQsIF9jb25maWcpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH1cbiAgYnV0dG9uRGVmYXVsdFN0YXRlKF9idXR0b25FbGVtZW50KSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcih0aGlzLl9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB0aGlzLl92YWxpZGF0aW9uQ29uZmlnKTtcbiAgICB9KTtcbiAgfVxufTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG5cdGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuXHRcdHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG5cdFx0dGhpcy5fbGluayA9IGRhdGEubGluaztcblx0XHR0aGlzLl9hbHQgPSBg0JjQt9C+0LHRgNCw0LbQtdC90LjQtTogJHt0aGlzLl9uYW1lfWA7XG5cdFx0dGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG5cdFx0dGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cdFx0dGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbi1saWtlJyk7XG5cdFx0dGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tdHJhc2gnKTtcblx0XHR0aGlzLl9lbGVtSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuXHRcdHRoaXMuZWxlbVRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKTtcblx0XHR0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG5cdH1cblx0X2dldFRlbXBsYXRlKCkge1xuXHRcdGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG5cdFx0XHQuY29udGVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50Jylcblx0XHRcdC5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0cmV0dXJuIGNhcmRFbGVtZW50O1xuXHR9XG5cdGdlbmVyYXRlQ2FyZCgpIHtcblx0XHR0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXHRcdC8vINCU0L7QsdCw0LLQuNC8INC00LDQvdC90YvQtVxuXHRcdHRoaXMuZWxlbVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblx0XHR0aGlzLl9lbGVtSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcblx0XHR0aGlzLl9lbGVtSW1hZ2UuYWx0ID0gdGhpcy5fYWx0O1xuXHRcdC8vINCS0LXRgNC90ZHQvCDRjdC70LXQvNC10L3RglxuXHRcdHJldHVybiB0aGlzLl9lbGVtZW50O1xuXHR9XG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcblx0XHR0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uKCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuX2VsZW1JbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuXHRcdH0pO1xuXHR9XG5cdF9oYW5kbGVUcmFzaEJ1dHRvbigpIHtcblx0XHR0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuXHR9XG5cdF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuXHRcdHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlJyk7XG5cdH1cbn07IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gJy4uL2NvbXBvbmVudHMvYXJyYXlDYXJkcy5qcydcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IsIHZhbGlkYXRpb25Db25maWcgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY2FyZC5qcydcblxuXG5jb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1lZGl0Jyk7XG5jb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBQcm9maWxlJyk7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5jb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2pvYicpO1xuY29uc3QgZm9ybVByb2ZpbGVJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3RleHRfbmFtZScpO1xuY29uc3QgZm9ybVByb2ZpbGVJbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdGV4dF9qb2InKTtcbmNvbnN0IHBvcHVwRm9ybVByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwRm9ybVByb2ZpbGVFZGl0Jyk7XG5jb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKTtcbmNvbnN0IHBvcHVwQ2FyZE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0LWNhcmQtbmFtZScpO1xuY29uc3QgcG9wdXBDYXJkVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1jYXJkLXVybCcpO1xuY29uc3QgcG9wdXBGb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1jYXJkJyk7XG5jb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xuY29uc3QgYnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1hZGQnKTtcbmNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jYXJkJyk7XG5jb25zdCBwb3B1cEZ1bGxJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVsbC1pbWcnKTtcbmNvbnN0IHBvcHVwRnVsbEltZ05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVsbC1pbWdfX25hbWUtaW1hZ2UnKTtcbmNvbnN0IHBvcHVwRnVsbEltZ0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1bGwtaW1nX19pbWFnZScpO1xuXG4vLyDQl9Cw0LrRgNGL0YLQuNC1LCDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QvtCyLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xuXHRwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2NLZXlib3JkKTtcbn1cbmZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcblx0cG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZVBvcHVwRXNjS2V5Ym9yZCk7XG59XG5mdW5jdGlvbiBjbG9zZVBvcHVwRXNjS2V5Ym9yZChldnQpIHtcblx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG5cdFx0Y29uc3QgcG9wdXBPcGVuZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfb3BlbmVkJyk7XG5cdFx0Y2xvc2VQb3B1cChwb3B1cE9wZW5lZCk7XG5cdH1cbn1cbnBvcHVwcy5mb3JFYWNoKChwb3B1cCkgPT4ge1xuXHRwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG5cdFx0aWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuXHRcdFx0Y2xvc2VQb3B1cChwb3B1cCk7XG5cdFx0fVxuXHRcdGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2J1dHRvbi1jbG9zZScpKSB7XG5cdFx0XHRjbG9zZVBvcHVwKHBvcHVwKTtcblx0XHR9XG5cdH0pO1xufSk7XG4vLyAtLS0tcG9wdXBQcm9maWxlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiByZW5kZXJFZGl0UHJvZmlsZSgpIHtcblx0Zm9ybVByb2ZpbGVJbnB1dE5hbWUudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcblx0Zm9ybVByb2ZpbGVJbnB1dEpvYi52YWx1ZSA9IHByb2ZpbGVKb2IudGV4dENvbnRlbnQ7XG59XG4vLyDQn9C10YDQtdC80LXRidCw0LXQvCDQstCy0LXQtNC10L3QvdGL0LUg0LTQsNC90L3Ri9C1INCyINC/0YDQvtGE0LjQu9GMXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0UHJvZmlsZShldnQpIHtcblx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZm9ybVByb2ZpbGVJbnB1dE5hbWUudmFsdWU7XG5cdHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBmb3JtUHJvZmlsZUlucHV0Sm9iLnZhbHVlO1xuXHRjbG9zZVBvcHVwKHBvcHVwUHJvZmlsZSk7XG59O1xuLy8gLS0tLWNhcmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vINC/0L7Qu9GD0YfQsNC10Lwg0YHQvtC00LXRgNC20LjQvNC+0LVcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSkge1xuXHQvLyDQodC+0LfQtNCw0LTQuNC8INGN0LrQt9C10LzQv9C70Y/RgCDQutCw0YDRgtC+0YfQutC4XG5cdGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCAnI2VsZW1lbnRzJywgaGFuZGxlQ2FyZENsaWNrKTtcblx0Ly8g0KHQvtC30LTQsNGR0Lwg0LrQsNGA0YLQvtGH0LrRgyDQuCDQstC+0LfQstGA0LDRidCw0LXQvCDQvdCw0YDRg9C20YNcblx0Y29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuXHRyZXR1cm4gY2FyZEVsZW1lbnQ7XG5cdC8vINC/0LXRgNC10LTQsNC10Lwg0LTQsNC90L3Ri9C1INC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC60LDRgNGC0LjQvdC60Lgg0L3QsCDQv9C+0LvQvdGL0Lkg0Y3QutGA0LDQvVxuXHRmdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuXHRcdHBvcHVwRnVsbEltZ05hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuXHRcdHBvcHVwRnVsbEltZ0ltYWdlLnNyYyA9IGxpbms7XG5cdFx0cG9wdXBGdWxsSW1nSW1hZ2UuYWx0ID0gbmFtZTtcblx0XHRvcGVuUG9wdXAocG9wdXBGdWxsSW1nKTtcblx0fTtcbn1cbi8vINC00L7QsdCw0LLQu9GP0LXQvCDQutCw0YDRgtC+0YfQutGDXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0Q2FyZChldnQpIHtcblx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdGNvbnN0IGl0ZW0gPSB7fTtcblx0aXRlbS5uYW1lID0gcG9wdXBDYXJkTmFtZS52YWx1ZTtcblx0aXRlbS5saW5rID0gcG9wdXBDYXJkVXJsLnZhbHVlO1xuXHRlbGVtZW50cy5wcmVwZW5kKHJlbmRlckNhcmQoaXRlbSkpO1xuXHRjbG9zZVBvcHVwKHBvcHVwQ2FyZCk7XG59O1xuLy8g0LTQvtCx0LDQstC70Y/QtdC8INCyIERPTVxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcblx0ZWxlbWVudHMucHJlcGVuZChyZW5kZXJDYXJkKGl0ZW0pKTtcbn0pO1xuXG5wb3B1cEZvcm1Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWl0UHJvZmlsZSk7XG5wb3B1cEZvcm1DYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXRDYXJkKTtcblxuLy8gLS0tLXZhbGlkYXRlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCB2YWxpZGF0b3JGb3JtRWRpdFByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEZvcm1Qcm9maWxlRWRpdCk7XG52YWxpZGF0b3JGb3JtRWRpdFByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB2YWxpZGF0b3JGb3JtQWRkQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybUNhcmQpO1xudmFsaWRhdG9yRm9ybUFkZENhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRvcGVuUG9wdXAocG9wdXBQcm9maWxlKTtcblx0dmFsaWRhdG9yRm9ybUVkaXRQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xuXHR2YWxpZGF0b3JGb3JtRWRpdFByb2ZpbGUuYnV0dG9uRGVmYXVsdFN0YXRlKCk7XG5cdHJlbmRlckVkaXRQcm9maWxlKCk7XG59KTtcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0b3BlblBvcHVwKHBvcHVwQ2FyZCk7XG5cdHZhbGlkYXRvckZvcm1BZGRDYXJkLnJlc2V0VmFsaWRhdGlvbigpO1xuXHRwb3B1cEZvcm1DYXJkLnJlc2V0KCk7XG59KTsiLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG5cdHtcblx0XHRuYW1lOiAn0JDRgNGF0YvQtycsXG5cdFx0bGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuXHR9LFxuXHR7XG5cdFx0bmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuXHRcdGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcblx0fSxcblx0e1xuXHRcdG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG5cdFx0bGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcblx0fSxcblx0e1xuXHRcdG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcblx0XHRsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG5cdH0sXG5cdHtcblx0XHRuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuXHRcdGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcblx0fSxcblx0e1xuXHRcdG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuXHRcdGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcblx0fVxuXTtcbmV4cG9ydCBkZWZhdWx0IGluaXRpYWxDYXJkczsiXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwibmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl92YWxpZGF0aW9uQ29uZmlnIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfYWx0IiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwiX3RyYXNoQnV0dG9uIiwiX2VsZW1JbWFnZSIsImVsZW1UaXRsZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJhbHQiLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsImJ1dHRvbkVkaXQiLCJwb3B1cFByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJmb3JtUHJvZmlsZUlucHV0TmFtZSIsImZvcm1Qcm9maWxlSW5wdXRKb2IiLCJwb3B1cEZvcm1Qcm9maWxlRWRpdCIsInBvcHVwcyIsInBvcHVwQ2FyZE5hbWUiLCJwb3B1cENhcmRVcmwiLCJwb3B1cEZvcm1DYXJkIiwiZWxlbWVudHMiLCJidXR0b25BZGQiLCJwb3B1cENhcmQiLCJwb3B1cEZ1bGxJbWciLCJwb3B1cEZ1bGxJbWdOYW1lIiwicG9wdXBGdWxsSW1nSW1hZ2UiLCJvcGVuUG9wdXAiLCJwb3B1cCIsImNsb3NlUG9wdXBFc2NLZXlib3JkIiwiY2xvc2VQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJyZW5kZXJDYXJkIiwiaXRlbSIsImdlbmVyYXRlQ2FyZCIsInRhcmdldCIsImNvbnRhaW5zIiwiaW5pdGlhbENhcmRzIiwicHJlcGVuZCIsInZhbHVlIiwidmFsaWRhdG9yRm9ybUVkaXRQcm9maWxlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRvckZvcm1BZGRDYXJkIiwicmVzZXRWYWxpZGF0aW9uIiwiYnV0dG9uRGVmYXVsdFN0YXRlIiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9