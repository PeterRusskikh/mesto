/*! For license information please see main.f684acc033b57aab220c.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:S(t,r,u)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var h={};function y(){}function v(){}function d(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(j([])));_&&_!==n&&o.call(_,u)&&(m=_);var g=d.prototype=y.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(e,r){function n(i,a,u,c){var s=p(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):r.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return n("throw",t,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return a=a?a.then(o,o):o()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=k(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function j(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=d,i(g,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},r.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,c,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new E(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),l(g,s,"Generator"),l(g,u,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},r}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)}))}}function o(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var r,i,a,u,c,s,l,f,p,h;return r=t,i=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Err: ".concat(t.status))}},{key:"getCurrentUserInfo",value:(h=n(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers});case 2:return r=t.sent,t.abrupt("return",this._handleResponse(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getInitialCards",value:(p=n(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers});case 2:return r=t.sent,t.abrupt("return",this._handleResponse(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"editUserInfo",value:(f=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:r.name,about:r.about})});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"addCard",value:(l=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(r)});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"deleteCard",value:(s=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/cards/").concat(r),{method:"DELETE",headers:this._headers});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"addLike",value:(c=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/cards/").concat(r,"/likes"),{method:"PUT",headers:this._headers});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"removeLike",value:(u=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/cards/").concat(r,"/likes"),{method:"DELETE",headers:this._headers});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"updateUserAvatar",value:(a=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:r.avatar})});case 2:return n=t.sent,t.abrupt("return",this._handleResponse(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}],i&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var c=function(){function t(e,r,n,o,i,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=e.name,this._image=e.link,this._likes=e.likes,this._templateSelector=r,this._handleCardClick=n,this._id=e._id,this._ownerId=e.owner._id,this._userId=o,this._deleteCard=u,this._like=i,this._dislike=a}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".content__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._likeBtn=this._element.querySelector(".content__like-button"),this._likesQty=this._element.querySelector(".content__like-count"),this._likesQty.textContent=this._likes.length,this._deleteBtn=this._element.querySelector(".content__delete-button"),this._ownerId!==this._userId&&this._deleteBtn.remove(),this._imgElement=this._element.querySelector(".content__image"),this._imgElement.src=this._image,this._imgElement.alt="Фотография "+this._title,this._element.querySelector(".content__title").textContent=this._title,this._setEventListeners(),this._isLiked(),this._element}},{key:"_setEventListeners",value:function(){var t=this;this._likeBtn.addEventListener("click",(function(){t._likeBtn.classList.contains("content__like-button_active")?t._dislike():t._like()})),this._deleteBtn.addEventListener("click",(function(){t._deleteCard(t._id)})),this._imgElement.addEventListener("click",(function(){t._handleCardClick(t._title,t._image)}))}},{key:"_isLiked",value:function(){var t=this;this._likes.forEach((function(e){e._id===t._userId?t.like():t.dislike()}))}},{key:"like",value:function(){this._likeBtn.classList.add("content__like-button_active")}},{key:"dislike",value:function(){this._likeBtn.classList.remove("content__like-button_active")}},{key:"setLikesCount",value:function(t){this._likesQty.textContent="".concat(t.likes.length)}},{key:"remove",value:function(){this._element.remove(),this._element=null}}])&&u(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._handleEscClose=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&!(t.ctrlKey||t.altKey||t.shiftKey)&&this._popup.classList.contains("popup_opened")&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup__close-button")&&t.close(),e.target.classList.contains("popup_opened")&&t.close()}))}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},y.apply(this,arguments)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(o){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._title=e._popup.querySelector(".popup__caption"),e}return e=a,(r=[{key:"open",value:function(t,e){this._image.src=e,this._image.alt="Фотография "+t,this._title.textContent=t,y(d(a.prototype),"open",this).call(this)}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},g.apply(this,arguments)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(n);if(o){var r=E(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._handleSubmitForm=e,r._popupForm=r._popup.querySelector(".popup__form"),r._inputsList=r._popupForm.querySelectorAll(".popup__input"),r}return e=a,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputValues={},this._inputsList.forEach((function(e){t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setInputsValues",value:function(t){this._inputsList.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t=this;g(E(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault();var r=e.submitter.textContent;e.submitter.textContent="Сохранение...",t._handleSubmitForm(t._getInputValues()).then((function(){return t.close()})).finally((function(){e.submitter.textContent=r}))}))}},{key:"close",value:function(){g(E(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&_(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},x.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(n);if(o){var r=j(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._handleSubmit=e,r._popupForm=r._popup.querySelector(".popup__form"),r}return e=a,(r=[{key:"open",value:function(t){this._card=t,x(j(a.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;x(j(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit(t._card)}))}}])&&L(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===C(o)?o:String(o)),n)}var o}var T=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=r,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._submitButtonSelector=e.submitButtonSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t){t.classList.add(this._inputErrorClass),this._errorElement.textContent=t.validationMessage,this._errorElement.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){this._errorElement&&(t.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent="")}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._errorElement=t._formElement.querySelector(".".concat(e.name,"-input-error")),t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"hideInputErros",value:function(){var t=this;this._toggleButtonState(this._buttonElement),this._inputList.forEach((function(e){t._errorElement=t._formElement.querySelector(".".concat(e.name,"-input-error")),t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}var B=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=r}var e,r;return e=t,(r=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(t){var e=this;this.clear(),t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&q(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===U(o)?o:String(o)),n)}var o}var F,A=function(){function t(e){var r=e.name,n=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r,this._about=n,this._avatar=o}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.textContent}}},{key:"setUserInfo",value:function(t){t.name&&(this._name.textContent=t.name),t.about&&(this._about.textContent=t.about),t.avatar&&(this._avatar.src=t.avatar)}}])&&N(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),G={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},V=document.querySelector(".popup_type_edit-profile"),D=document.querySelector(".popup_type_add-content"),Y=document.querySelector(".popup_type_update-avatar"),H=document.querySelector(".popup_type_del-content"),J=document.querySelector(".popup_type_image"),K=document.querySelector(".profile__name"),M=document.querySelector(".profile__about"),Q=document.querySelector(".profile__avatar"),z=document.querySelector(".content__list"),$=document.querySelector(".popup__form_type_edit-profile"),W=document.querySelector(".popup__form_type_add-content"),X=document.querySelector(".popup__form_type_update-avatar"),Z=document.querySelector(".profile__edit-button"),tt=document.querySelector(".profile__add-button"),et=document.querySelector(".profile__avatar-button");function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ot(){ot=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function y(){}var v={};c(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(x([])));m&&m!==e&&r.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==rt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function it(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function at(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){it(i,n,o,a,u,"next",t)}function u(t){it(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ut(t){var e=new c(t,"#content__card-template",ct,F,at(ot().mark((function r(){var n;return ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,wt.addLike(t._id);case 3:n=r.sent,e.like(),e.setLikesCount(n),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.warn(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])}))),at(ot().mark((function r(){var n;return ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,wt.removeLike(t._id);case 3:n=r.sent,e.dislike(),e.setLikesCount(n),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.warn(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])}))),(function(){_t.open(e)}));return e.generateCard()}function ct(t,e){vt.open(t,e)}function st(){return(st=at(ot().mark((function t(e){var r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wt.editUserInfo(e);case 3:r=t.sent,gt.setUserInfo(r),mt.close(),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",console.log(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function lt(){return(lt=at(ot().mark((function t(e){var r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wt.updateUserAvatar(e);case 3:r=t.sent,gt.setUserInfo(r),bt.close(),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",console.log(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function ft(){return(ft=at(ot().mark((function t(e){var r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,wt.addCard(e);case 3:r=t.sent,Et.addItem(ut(r)),dt.close(),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",console.log(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}Z.addEventListener("click",(function(){mt.open(),mt.setInputsValues(gt.getUserInfo()),pt.hideInputErros()}),!1),et.addEventListener("click",(function(){bt.open(),yt.hideInputErros()}),!1),tt.addEventListener("click",(function(){dt.open(),ht.hideInputErros()}),!1);var pt=new T(G,$);pt.enableValidation();var ht=new T(G,W);ht.enableValidation();var yt=new T(G,X);yt.enableValidation();var vt=new m(J),dt=new S(D,(function(t){return ft.apply(this,arguments)})),mt=new S(V,(function(t){return st.apply(this,arguments)})),bt=new S(Y,(function(t){return lt.apply(this,arguments)})),_t=new P(H,function(){var t=at(ot().mark((function t(e){return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:wt.deleteCard(e._id).then((function(){e.remove(),_t.close()})).catch((function(t){return console.log(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());_t.setEventListeners(),vt.setEventListeners(),dt.setEventListeners(),mt.setEventListeners(),bt.setEventListeners();var gt=new A({name:K,about:M,avatar:Q}),wt=new i({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"e91c4804-c3aa-4575-a63a-f03f4cdae8b0","Content-Type":"application/json"}}),Et=new B({renderer:function(t){var e=ut(t);Et.addItem(e)}},z);Promise.all([wt.getCurrentUserInfo(),wt.getInitialCards()]).then((function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,r)||function(t,e){if(t){if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];gt.setUserInfo(o),F=o._id,Et.renderItems(i.reverse())})).catch((function(t){return console.log(t)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQU0sSUFBSTNLLEVBQUksQ0FDbEJJLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUHNNLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSWRiLEdBQVcsSUFBSXZELEVBQ25CLENBQ0VFLFNBQVUsU0FBQzNILEdBQ1QsSUFBTXdGLEVBQU9rRSxHQUFXMUosR0FDeEJnTCxHQUFTQyxRQUFRekYsRUFDbkIsR0FFRjBELEdBRUZ2SixRQUFRbU0sSUFBSSxDQUFDbEMsR0FBSW1DLHFCQUFzQm5DLEdBQUlvQyxvQkFDeEM5RyxNQUFLLFlBQXVCLHE2QkFBckJxRixFQUFRLEtBQUUwQixFQUFLLEtBQ3JCekIsR0FBWUMsWUFBWUYsR0FDeEIzSixFQUFTMkosRUFBU2hKLElBQ2xCeUosR0FBU2tCLFlBQVlELEVBQU1FLFVBQzdCLElBQ0NULE9BQU0sU0FBQ0MsR0FBRyxPQUFLNUIsUUFBUVksSUFBSWdCLEVBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gIH1cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnI6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcbiAgYXN5bmMgZ2V0Q3VycmVudFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gIH1cclxuICBhc3luYyBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgfVxyXG4gIGFzeW5jIGVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgfVxyXG4gIGFzeW5jIGFkZENhcmQoZGF0YSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgfVxyXG4gIGFzeW5jIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gIH1cclxuICBhc3luYyBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKTtcclxuICB9XHJcbiAgYXN5bmMgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgfVxyXG4gIGFzeW5jIHVwZGF0ZVVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIHVzZXJJZCwgbGlrZSwgZGlzbGlrZSwgZGVsZXRlQ2FyZCkge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQgPSBkZWxldGVDYXJkO1xyXG4gICAgdGhpcy5fbGlrZSA9IGxpa2U7XHJcbiAgICB0aGlzLl9kaXNsaWtlID0gZGlzbGlrZTtcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fY2FyZCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRfX2xpa2UtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9saWtlc1F0eSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRfX2xpa2UtY291bnQnKTtcclxuICAgIHRoaXMuX2xpa2VzUXR5LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdG4ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9ICfQpNC+0YLQvtCz0YDQsNGE0LjRjyAnICsgdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5faXNMaWtlZCgpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC5jb250YWlucygnY29udGVudF9fbGlrZS1idXR0b25fYWN0aXZlJykpIHtcclxuICAgICAgICB0aGlzLl9kaXNsaWtlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fZGVsZXRlQ2FyZCh0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90aXRsZSwgdGhpcy5faW1hZ2UpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9pc0xpa2VkKCkge1xyXG4gICAgdGhpcy5fbGlrZXMuZm9yRWFjaCgodXNlcikgPT4ge1xyXG4gICAgICB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkID8gdGhpcy5saWtlKCkgOiB0aGlzLmRpc2xpa2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBsaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKCdjb250ZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICB9XHJcbiAgZGlzbGlrZSgpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnY29udGVudF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgfVxyXG4gIHNldExpa2VzQ291bnQocmVzKSB7XHJcbiAgICB0aGlzLl9saWtlc1F0eS50ZXh0Q29udGVudCA9IGAke3Jlcy5saWtlcy5sZW5ndGh9YDtcclxuICB9XHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICBjb25zdCBpc05vdENvbWJpbmVkS2V5ID0gIShlLmN0cmxLZXkgfHwgZS5hbHRLZXkgfHwgZS5zaGlmdEtleSk7XHJcbiAgICAgIGlmIChpc05vdENvbWJpbmVkS2V5ICYmIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xyXG4gIH1cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSAn0KTQvtGC0L7Qs9GA0LDRhNC40Y8gJyArIG5hbWU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0c0xpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG4gIHNldElucHV0c1ZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgaW5pdGlhbFRleHQgPSBldnQuc3VibWl0dGVyLnRleHRDb250ZW50O1xyXG4gICAgICBldnQuc3VibWl0dGVyLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2xvc2UoKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBldnQuc3VibWl0dGVyLnRleHRDb250ZW50ID0gaW5pdGlhbFRleHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gIH1cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2NhcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIXRoaXMuX2Vycm9yRWxlbWVudCkgcmV0dXJuO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5uYW1lfS1pbnB1dC1lcnJvcmApO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGhpZGVJbnB1dEVycm9zKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQubmFtZX0taW5wdXQtZXJyb3JgKTtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcclxuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgaWYgKGRhdGEubmFtZSkgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIGlmIChkYXRhLmFib3V0KSB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICBpZiAoZGF0YS5hdmF0YXIpIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHtcclxuICBwb3B1cEVkaXRQcm9maWxlLFxyXG4gIHBvcHVwQWRkQ29udGVudCxcclxuICBwb3B1cFNob3dJbWFnZSxcclxuICBwb3B1cFVwZGF0ZUF2YXRhcixcclxuICBwb3B1cERlbENvbnRlbnQsXHJcbiAgYnV0dG9uRWRpdFByb2ZpbGUsXHJcbiAgYnV0dG9uQWRkQ29udGVudCxcclxuICBidXR0b25VcGRhdGVBdmF0YXIsXHJcbiAgbmFtZVByb2ZpbGUsXHJcbiAgYWJvdXRQcm9maWxlLFxyXG4gIGF2YXRhclByb2ZpbGUsXHJcbiAgZm9ybVVwZGF0ZUF2YXRhcixcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGNvbnRlbnRMaXN0Tm9kZSxcclxuICBmb3JtRWRpdFByb2ZpbGUsXHJcbiAgZm9ybUFkZENvbnRlbnQsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxubGV0IHVzZXJJZDtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICAnI2NvbnRlbnRfX2NhcmQtdGVtcGxhdGUnLFxyXG4gICAgc2hvd1BvcHVwV2l0aEltYWdlLFxyXG4gICAgdXNlcklkLFxyXG4gICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5hZGRMaWtlKGRhdGEuX2lkKTtcclxuICAgICAgICBjYXJkLmxpa2UoKTtcclxuICAgICAgICBjYXJkLnNldExpa2VzQ291bnQocmVzKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucmVtb3ZlTGlrZShkYXRhLl9pZCk7XHJcbiAgICAgICAgY2FyZC5kaXNsaWtlKCk7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlc0NvdW50KHJlcyk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIHBvcHVwQ29uZmlybS5vcGVuKGNhcmQpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuZnVuY3Rpb24gc2hvd1BvcHVwV2l0aEltYWdlKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybUVkaXRQcm9maWxlKGRhdGEpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBhcGkuZWRpdFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgY3VycmVudFVzZXIuc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcclxuICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybVVwZGF0ZUF2YXRhcihkYXRhKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgYXBpLnVwZGF0ZVVzZXJBdmF0YXIoZGF0YSk7XHJcbiAgICBjdXJyZW50VXNlci5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEZvcm1BZGRDb250ZW50KGRhdGEpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbmV3Q2FyZCA9IGF3YWl0IGFwaS5hZGRDYXJkKGRhdGEpO1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmQpKTtcclxuICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcclxuICB9XHJcbn1cclxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAnY2xpY2snLFxyXG4gICgpID0+IHtcclxuICAgIHBvcHVwRWRpdC5vcGVuKCk7XHJcbiAgICBwb3B1cEVkaXQuc2V0SW5wdXRzVmFsdWVzKGN1cnJlbnRVc2VyLmdldFVzZXJJbmZvKCkpO1xyXG4gICAgdmFsaWRhdG9yRm9ybUVkaXRQcm9maWxlLmhpZGVJbnB1dEVycm9zKCk7XHJcbiAgfSxcclxuICBmYWxzZVxyXG4pO1xyXG5idXR0b25VcGRhdGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAnY2xpY2snLFxyXG4gICgpID0+IHtcclxuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxuICAgIHZhbGlkYXRvckZvcm1VcGRhdGVBdmF0YXIuaGlkZUlucHV0RXJyb3MoKTtcclxuICB9LFxyXG4gIGZhbHNlXHJcbik7XHJcbmJ1dHRvbkFkZENvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAnY2xpY2snLFxyXG4gICgpID0+IHtcclxuICAgIHBvcHVwQWRkLm9wZW4oKTtcclxuICAgIHZhbGlkYXRvckZvcm1BZGRDb250ZW50LmhpZGVJbnB1dEVycm9zKCk7XHJcbiAgfSxcclxuICBmYWxzZVxyXG4pO1xyXG5cclxuY29uc3QgdmFsaWRhdG9yRm9ybUVkaXRQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVkaXRQcm9maWxlKTtcclxudmFsaWRhdG9yRm9ybUVkaXRQcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybUFkZENvbnRlbnQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtQWRkQ29udGVudCk7XHJcbnZhbGlkYXRvckZvcm1BZGRDb250ZW50LmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgdmFsaWRhdG9yRm9ybVVwZGF0ZUF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1VcGRhdGVBdmF0YXIpO1xyXG52YWxpZGF0b3JGb3JtVXBkYXRlQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBTaG93SW1hZ2UpO1xyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkQ29udGVudCwgaGFuZGxlU3VibWl0Rm9ybUFkZENvbnRlbnQpO1xyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlLCBoYW5kbGVTdWJtaXRGb3JtRWRpdFByb2ZpbGUpO1xyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwVXBkYXRlQXZhdGFyLCBoYW5kbGVTdWJtaXRGb3JtVXBkYXRlQXZhdGFyKTtcclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShwb3B1cERlbENvbnRlbnQsIGFzeW5jIChjYXJkKSA9PiB7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChjYXJkLl9pZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5yZW1vdmUoKTtcclxuICAgICAgcG9wdXBDb25maXJtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG59KTtcclxuXHJcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgY3VycmVudFVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IG5hbWVQcm9maWxlLFxyXG4gIGFib3V0OiBhYm91dFByb2ZpbGUsXHJcbiAgYXZhdGFyOiBhdmF0YXJQcm9maWxlLFxyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnZTkxYzQ4MDQtYzNhYS00NTc1LWE2M2EtZjAzZjRjZGFlOGIwJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb250ZW50TGlzdE5vZGVcclxuKTtcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRDdXJyZW50VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcclxuICAgIGN1cnJlbnRVc2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzLnJldmVyc2UoKSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQtY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV91cGRhdGUtYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cERlbENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9kZWwtY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBTaG93SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgbmFtZVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0Jyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgY29udGVudExpc3ROb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRfX2xpc3QnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2VkaXQtcHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgZm9ybUFkZENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9hZGQtY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgZm9ybVVwZGF0ZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX3VwZGF0ZS1hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvblVwZGF0ZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItYnV0dG9uJyk7XHJcbiJdLCJuYW1lcyI6WyJBcGkiLCJvcHRpb25zIiwidGhpcyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIl9oYW5kbGVSZXNwb25zZSIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImNhcmRJZCIsImF2YXRhciIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidXNlcklkIiwibGlrZSIsImRpc2xpa2UiLCJkZWxldGVDYXJkIiwiX3RpdGxlIiwiX2ltYWdlIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfZGVsZXRlQ2FyZCIsIl9saWtlIiwiX2Rpc2xpa2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZUJ0biIsIl9saWtlc1F0eSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2RlbGV0ZUJ0biIsInJlbW92ZSIsIl9pbWdFbGVtZW50Iiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lzTGlrZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJmb3JFYWNoIiwidXNlciIsImFkZCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZSIsImtleSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiUG9wdXBXaXRoRm9ybSIsInNlbGVjdG9yIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX3BvcHVwRm9ybSIsIl9pbnB1dHNMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImluaXRpYWxUZXh0Iiwic3VibWl0dGVyIiwiX2dldElucHV0VmFsdWVzIiwidGhlbiIsImZpbmFsbHkiLCJyZXNldCIsIlBvcHVwQ29uZmlybSIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJjYXJkIiwiX2NhcmQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsIml0ZW1zIiwiY2xlYXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJVc2VySW5mbyIsIl9uYW1lIiwiX2Fib3V0IiwiX2F2YXRhciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJwb3B1cEVkaXRQcm9maWxlIiwicG9wdXBBZGRDb250ZW50IiwicG9wdXBVcGRhdGVBdmF0YXIiLCJwb3B1cERlbENvbnRlbnQiLCJwb3B1cFNob3dJbWFnZSIsIm5hbWVQcm9maWxlIiwiYWJvdXRQcm9maWxlIiwiYXZhdGFyUHJvZmlsZSIsImNvbnRlbnRMaXN0Tm9kZSIsImZvcm1FZGl0UHJvZmlsZSIsImZvcm1BZGRDb250ZW50IiwiZm9ybVVwZGF0ZUF2YXRhciIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQWRkQ29udGVudCIsImJ1dHRvblVwZGF0ZUF2YXRhciIsImkiLCJjcmVhdGVDYXJkIiwic2hvd1BvcHVwV2l0aEltYWdlIiwiYXBpIiwiYWRkTGlrZSIsInNldExpa2VzQ291bnQiLCJjb25zb2xlIiwid2FybiIsInJlbW92ZUxpa2UiLCJwb3B1cENvbmZpcm0iLCJvcGVuIiwiZ2VuZXJhdGVDYXJkIiwicG9wdXBJbWFnZSIsImVkaXRVc2VySW5mbyIsInVzZXJEYXRhIiwiY3VycmVudFVzZXIiLCJzZXRVc2VySW5mbyIsInBvcHVwRWRpdCIsImxvZyIsInVwZGF0ZVVzZXJBdmF0YXIiLCJwb3B1cEF2YXRhciIsImFkZENhcmQiLCJuZXdDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwicG9wdXBBZGQiLCJzZXRJbnB1dHNWYWx1ZXMiLCJnZXRVc2VySW5mbyIsInZhbGlkYXRvckZvcm1FZGl0UHJvZmlsZSIsImhpZGVJbnB1dEVycm9zIiwidmFsaWRhdG9yRm9ybVVwZGF0ZUF2YXRhciIsInZhbGlkYXRvckZvcm1BZGRDb250ZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhdGNoIiwiZXJyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0Q3VycmVudFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiXSwic291cmNlUm9vdCI6IiJ9